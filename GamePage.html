<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://getbootstrap.com/favicon.ico">

    <title>Simple Math Game</title>

    <!-- Bootstrap core CSS -->
    <link href="Starter%20Template%20for%20Bootstrap_files/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="Starter%20Template%20for%20Bootstrap_files/starter-template.css" rel="stylesheet">
    <!-- <link href="css/simple-sidebar.css" rel="stylesheet"> -->
  </head>

  <script>
    var max     = 10; //Maximum number that can be generated in a problem (starting value)
    var min     = 0;  //Minimum number that can be generated in a problem (starting value)
    var score   = 0;  //User-score.  Increments by one for each problem answered correctly.
    var lives   = 3;  //User-lives.  Decrements by one for each problem answered incorrectly.
    var level   = 1;  //User-level.  Increments by one everytime the score increments by five.

    //When page loads, numbers will be generated and displayed as the first problem the user needs to answer.
    var number1 = getRandomInt(max);
    var number2 = getRandomInt(max);

    function getRandomInt(max)
    {
      return Math.floor((Math.random() * max) + min);
    }
  </script>

  <body>

    <!-- Menu Bar ontop of the Page -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="HomePage.html">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" id="highscores-button">High Scores</a>
          </li>
        </ul>
      </div>
    </nav>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li>
                    <a href="#">Username ----- Score</a>
                </li>
            </ul>
        </div>

    <main role="main" class="container">

      <!-- User interface -->
      <div class="starter-template">
        <h1>Evilscaught Presents: The Math Game</h1>
        <a id="lives">Lives: <br></a>
        <a id="score">Score: <br></a>
        <a id="level">Level: <br></a>
        <a id="problem"><br>What is <br></a>

        <!-- STARTS HERE -->
        <div class="answer-container" id="answer-container">
          <label for="answerField">
              <p>The answer is: <span class="tooltiptext">Press Enter to Submit Answer</span> </p> <input type="text" id="answerField"/>
          </label>
        </div>
        <!-- ENDS HERE -->

        <!-- OLD CODE
        <input type="text" id="answerField" value="" size="30" maxlength="50">
        <button type="button" id="btnSubmit" onclick="checkAnswer();">Submit</button>
        /OLD CODE -->
        <h1 id="message"><br><h1>
      </div>

    </main><!-- /.container -->

    <nav class="nav navbar-expand-md navbar-dark bg-dark fixed-left">
    </nav>

  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <script>
    //e is an abbreviation for "element", i.e. eMessage is short for elementMessage.
    //This syntax is used to indicate that HTML elements are being called.
    var eProblem     = document.getElementById("problem");
    var eAnswerField = document.getElementById("answerField");
    var eMessage     = document.getElementById("message");
    var eLives       = document.getElementById("lives");
    var eScore       = document.getElementById("score");
    var eLevel       = document.getElementById("level");

    eLives.innerHTML = "Lives: " + lives + "<br>";
    eScore.innerHTML = "Score: " + score + "<br>";
    eLevel.innerHTML = "Level: " + level + "<br>";
    eProblem.innerHTML = "<br>What is " + number1 + " + " + number2 + "?<br>";

    eAnswerField.onkeydown = function(event)
    {
        if (event.keyCode == 13)
        {
            checkAnswer();
        }
    }

    function checkAnswer()
    {
      var correctAnswer = number1 + number2;

      //If the user-entered answer is equal to the correct answer:
      if (answerField.value == correctAnswer)
      {
          score++;

          //Reset answer field and any messages on display
          eAnswerField.value = "";
          eMessage.innerHTML = "";
          eScore.innerHTML = "Score: " + score + "<br>";

          //If the score has increment by five, level up!
          if (score % 5 == 0)
          {
            level++;
            max+=10;
            min+=10;

            eMessage.innerHTML = "Level Up!";
            eLevel.innerHTML = "Level: " + level + "<br>";
          }

          generateNewProblem();
      }
      //If the user did not enter anything:
      else if (answerField.value == "")
      {
        eMessage.innerHTML = "Cannot be Empty!";
        $("#answer-container").shake();
      }
      //If the user-entered answer is not equal to the correct answer:
      else
      {
        $("#answer-container").shake();
        lives--;
        if (lives < 0)
        {
          document.getElementById("answer-container").style.visibility = "hidden";
          eMessage.innerHTML = "GAME OVER :(";
          eProblem.style.visibility = "hidden";
          promptHighScores();
        }
        else
        {
          eMessage.innerHTML = "Try Again";
          eLives.innerHTML = "Lives: " + lives + "<br>";
        }
      }
    }

    function generateNewProblem()
    {
      number1 = getRandomInt(max);
      number2 = getRandomInt(max);
      problem.innerHTML = "<br>What is " + number1 + " + " + number2 + "?<br>";
    }

    function promptHighScores()
    {

    }

    //This function will toggle the highscores sidebar
    $("#highscores-button").click(function(e)
    {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });

    //This function will make the answer-container shake if the user submits incorrect input.
    jQuery.fn.shake = function()
    {
      this.each(function(i)
      {
        $("#answer-container").css({ "position" : "relative" });
        for (var x = 1; x <= 3; x++)
        {
            $(this).animate({ left: -5 }, 10).animate({ left: 0 }, 50).animate({ left: 25 }, 10).animate({ left: 0 }, 50);
        }
      });
      return this;
    }
  </script>

</body></html>
